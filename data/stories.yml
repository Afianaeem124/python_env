version: "3.1"

stories: # [INFO]: connects intents (relationship map), brings context to responses in {rasa shell} [similar to taylorered responses in chatgpt] -> path, simple if-if ladder??

# - story: happy path
#   steps:
#     - intent: greet
#     - action: utter_ask_phone
#     - intent: phone
#       entities:
#       - number: 45906543198
#     - slot_was_set:
#       - phone: 80021560987
#     - action: action_say_phone


# - story: sad path
#   steps:
#     - intent: greet
#     - action: utter_greet
#     - intent: mood_unhappy
#     - action: utter_cheer_up
#     - action: utter_did_that_help
#     - intent: deny
#     - action: utter_goodbye

# - story: greet and then ask skin concern 
#   steps:
#     - intent: greet
#     - action: utter_ask_skin_concern
#     - intent: skin_concern
#       entities:
#       - skin_problem: acne
#     - slot_was_set:
#       - skin_concern: acne
#     - action: action_say_skin_concern
#     - action: action_recommend_products


# - story: happy path (testing)
#   steps:
#     - intent: skin_concern
#       entities:
#       - skin_problem: acne
#     - slot_was_set:
#       - skin_concern: acne
#     - action: action_say_skin_concern
#     - action: action_recommend_products


# - story: explain ingredient benefits
#   steps:
#     - intent: ingredient_info
#     - action: action_fetch_ingredient_info






- story: interactive_story_checkpoint
  steps:
  - or: 
    - intent: ask_skin_concern   
    - intent: greet
  - action: utter_greet
  - checkpoint : check_affirmation



- story: interactive_story_checkpoint_path_1
  steps:
  - checkpoint: check_affirmation
  - intent: affirm
  - action : utter_instruction
  - action: skin_form
  - active_loop: skin_form
  - slot_was_set:
    - requested_slot: skin_type
  - slot_was_set:
    - skin_type: oily
  - slot_was_set:
    - requested_slot: skin_concern
  - slot_was_set:
    - skin_concern: acne
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
 # - action: utter_submit ask_skin_concern
  - action: utter_slots_values
  - action : action_recommend_products_from_db



  
- story: interactive_story_checkpoint_path_2
  steps:
  - checkpoint : check_affirmation
  - intent: deny
  - action : utter_ask_affirmation
  - checkpoint : skin_form_checkpoint 
  


- story: interactive_story_checkpoint_path_2.1
  steps:
  - checkpoint : skin_form_checkpoint
  - intent: deny
  - action : utter_goodbye



- story: interactive_story_checkpoint_path_2.2
  steps:
  - checkpoint : skin_form_checkpoint
  - intent: affirm
  - action : utter_instruction
  - action: skin_form
  - active_loop: skin_form
  - slot_was_set:
    - requested_slot: skin_type
  - slot_was_set:
    - skin_type: oily
  - slot_was_set:
    - requested_slot: skin_concern
  - slot_was_set:
    - skin_concern: acne
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
 # - action: utter_submit ask_skin_concern
  - action: utter_slots_values
  - action : action_recommend_products_from_db



- story: Fallback example
  steps:
  - intent: nlu_fallback
  - action: action_fallback_to_gemini



